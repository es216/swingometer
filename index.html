<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CFSNPXGF4T"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CFSNPXGF4T');
</script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Reeves-o-meter | Tracking blows and boosts for Rachel Reeves</title>

  <meta name="title" content="Reeves-o-Meter | Blow or Boost?">
  <meta name="description" content="Tracking the nation's most important economic indicator: blows and boosts to Rachel Reeves">
  <meta name="keywords" content="Rachel Reeves, UK politics, parody, blow or boost, budget 2025, Reevesometer">
  <link rel="canonical" href="https://reevesometer.co.uk/">
  <link rel="icon" type="image/png" sizes="32x32" href="media/favicon.png">
  <link rel="icon" type="image/x-icon" href="media/favicon.ico">
 

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://reevesometer.co.uk/">
  <meta property="og:title" content="Reeves-o-Meter | Blow or Boost?">
  <meta property="og:description" content="Tracking blows and boosts to Rachel Reeves, one headline at a time.">
  <meta property="og:image" content="https://reevesometer.co.uk/media/share.png">
  <meta property="og:site_name" content="Reeves-o-Meter">
  <meta property="og:locale" content="en_GB">
  

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://reevesometer.co.uk/">
  <meta name="twitter:title" content="Reeves-o-Meter | Blow or Boost?">
  <meta name="twitter:description" content="Tracking blows and boosts to Rachel Reeves, one headline at a time.">
  <meta name="twitter:image" content="https://reevesometer.co.uk/media/share.PNG">

  <style>
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #f5f5f5;
      font-family: "Arial Black", sans-serif;
      color: #222;
    }

    /*.party-banner {
      position: fixed;
      top: -20rem;        
      left: -150px;     
      width: 200vw;       
      height: 50px;
      background: repeating-linear-gradient(
        45deg,
        #d62828,
        #d62828 20px,
        #F6AE2D 20px,
        #F6AE2D 40px,
        #2a9d8f 40px,
        #2a9d8f 60px
      );
      transform: rotate(-20deg);  
      opacity: 0.30;           
      z-index: 0;                 
      pointer-events: none;       
      color: white;
      gap: 100px;
      display: flex;
      align-items: center;
      font-size: 2rem;
      white-space: nowrap;
    }

    .party-banner.two {
      top: 0rem;
    }

    .party-banner.three {
      top: 20rem;
    }

    .party-banner.four {
      top: 40rem;
    }

    .party-banner.five {
      top: 60rem;
    } 
*/
    h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
      margin-top: 1rem;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .headline {
      text-align: center;
      max-width: 80%;
      font-size: 1.3rem;
      font-weight: bold;
      line-height: 1.4;
      margin-bottom: 2rem;
    }

    #headline-text {
      display: block;
      margin-bottom: 0.5rem;
    }

    .the-word {
      color:#d62828; /* update colour if necessary before each deployment */
      font-size: 1.15em;
      font-weight: 900;
    }

    #headline-indicator {
      font-size: 0.9rem;
      font-weight: bold;
    }

    #headline-indicator.boost {
      color: #2a9d8f; /* same green as boost side */
    }

    #headline-indicator.blow {
      color: #d62828; /* same red as blow side */
    }

    .swingometer {
      position: relative;
      width: min(80vw, 600px);
      height: calc(min(80vw, 600px) / 2);
      margin-top: 1rem;
    }

    /* The semicircle background */
    .dial {
      width: 100%;
      height: 100%;
      border-top-left-radius: 1000px;
      border-top-right-radius: 1000px;
      background: linear-gradient(to right, #d62828 0%, #f5f5f5 50%, #2a9d8f 100%);
      background-size: 100% 100%;
      background-repeat: no-repeat;
      border: 4px solid #333;
      box-sizing: border-box;
      overflow: hidden;
      position: relative;
      z-index: 1;
    }

    .reeves {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 75%;
      height: auto;
      pointer-events: none;
      z-index: 2;
      filter: drop-shadow(0px 6px 8px rgba(0, 0, 0, 0.5))
              brightness(1.05)
              contract(1.05);
    }

    /* The arrow/pointer */
    .arrow {
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 6px;
      height: 105%;
      background: #000000;
      transform-origin: bottom center;
      transition: transform 1s ease-out;
      z-index: 3;
    }

    /* Labels */
    .labels {
      display: flex;
      justify-content: space-between;
      width: min(85vw, 640px);
      margin-top: 1rem;
      font-size: 1.5rem;
      font-weight: bold;
      text-transform: uppercase;
      padding: 0 1rem;
      box-sizing: border-box;
    }

    .blow { color: #d62828; }
    .boost { color: #2a9d8f; }

    .bloost {
      position: absolute;
      top: -2.5rem;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.5rem;
      font-weight: bold;
      text-transform: uppercase;
      color: #555;
    }

    .scorecard-header {
      margin-top: 1rem;
      font-size: 1.4rem;
      font-weight: bold;
      text-align: center;
      font-family: Arial, sans-serif;
      color: #333;
    }

    .scorecard {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.5rem;
      font-size: 1.1rem;
      font-weight: bold;
      font-family: Arial, sans-serif;
      color: #333;
    }

    .boost-score {
      color: #2a9d8f;
    }

    .blow-score {
      color: #d62828;
    }

    button {
      margin-top: 2rem;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      background: #333;
      color: #fff;
      cursor: pointer;
    }

    button:hover {
      background: #444;
    }

    .disclaimer {
      position: fixed;
      bottom: 8px;
      right: 12px;
      font-size: 0.8rem;
      color: #2f2f2f;
      font-family: Arial, sans-serif;
      opacity: 0.7;
    }

    /* Generate section */
    .generate-section {
      text-align: center;
      margin-top: 0.1rem;
      margin-bottom: 1rem;
    }

    .generate-btn {
      padding: 0.9rem 1.8rem;
      font-size: 1rem;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      background: linear-gradient(to right, #2a9d8f, #d62828);
      color: #fff;
      cursor: pointer;
      transition: transform 0.15s ease, box-shade 0.15s ease, opacity 0.15s ease;
    }

    .generate-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
      opacity: 0.95;
    }

    /* --- Voting section --- */
    .vote-section {
      text-align: center;
      margin-top: 0.5rem;
      margin-bottom: 1rem;
      font-family: Arial, sans-serif;
      color: #333;
    }

    .vote-section p + .vote-buttons {
      margin-top: -0.8rem;   
    }

    .vote-prompt {
      font-size: 1.1rem;
      line-height: 1.4;
      margin-bottom: 0;
      display: inline-block;
    }

    .vote-buttons {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-top: 0;
    }

    .vote-btn {
      padding: 0.8rem 1.8rem;
      font-size: 1rem;
      font-weight: bold;
      border: 2px solid transparent;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      background: rgba(255,255,255,0.8);
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }

    .blow-btn {
      color: #d62828;
      border-color: #d62828;
    }

    .boost-btn {
      color: #2a9d8f;
      border-color: #2a9d8f;
    }

    .vote-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .vote-counter {
      text-align: center;
      font-weight: bold;
      margin-top: 0.5rem;
      font-size: 1rem;
      color: #333;
    }

    .blow-count {
      color: #d62828;
    }

    .boost-count {
      color: #2a9d8f;
    }

    .follow-section {
      margin-top: 1.2rem;
      text-align: center;
    }

    .follow-link {
      font-size: 0.95rem;
      font-weight: bold;
      text-decoration: none;
      padding: 0.45rem 1.1rem;
      border-radius: 6px;
      border: 2px solid #1da1f2;
      color: #1da1f2;
      background: rgba(255, 255, 255, 0.7);
      transition: all 0.2s ease;
    }

    .follow-link:hover {
      background: #1da1f2;
      color: #fff;
    }

    .share-section {
      text-align: center;
      margin-top: -3rem;
      margin-bottom: 1.5rem;
      font-family: Arial, sans-serif;
      color: #444;
      opacity: 0.9;
    }

    .share-section p {
      font-size: 1rem;
      margin-bottom: 0.75rem;
      letter-spacing: 0.5px;
    }

    .share-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      align-items: center;
    }

    .share-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: bold;
      line-height: 1;
      padding: 0.6rem 1.25rem;
      border-radius: 20px;
      border: 2px solid #ccc;
      color: #333;
      background: rgba(255, 255, 255, 0.7);
      white-space: nowrap;
      transition: all 0.2s ease;
      height: 40px;
      box-sizing: border-box;
      margin: 0;            
      position: relative;      
      top: 1px;                
    }

    .share-btn:hover {
      border-color: #999;
      background: rgba(240, 240, 240, 0.9);
    }

    
    .share-btn.twitter:hover {
      color: #1da1f2;
      border-color: #1da1f2;
    }

    .share-btn.copy-btn {
      background: rgba(255, 255, 255, 0.7);
      border: 2px solid #ccc;
      color: #333;
    }

    .share-btn.copy-btn:hover {
      background: rgba(240, 240, 240, 0.9);
      border-color: #999;
    }

  
    .past-link {
      position: absolute;
      top: 1.2rem;
      right: 1.5rem;
      font-size: 0.9rem;
      font-weight: 600;
      text-decoration: none;
      color: #333;
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid #ccc;
      padding: 0.35rem 0.8rem;
      border-radius: 6px;
      transition: all 0.2s ease;
      opacity: 0.8;
      z-index: 10;
    }

    .past-link:hover {
      opacity: 1;
      background: rgba(240, 240, 240, 0.9);
      border-color: #999;
    }

    /* Headline generator popup */
    .generator-popup {
      position: fixed;
      inset: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.6);
      z-index: 999;
      transition: opacity 0.3s ease;
    }

    .generator-popup.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .popup-content {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: #fff;
      border-radius: 12px;
      padding: 2.5rem 3rem 2rem;
      text-align: center;
      font-family: "Arial Black", sans-serif;
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
      max-width: 90%;
      width: 400px;
      transition: background-color 0.4s ease;
    }

    .popup-content.blow {
      background: linear-gradient(135deg, #ffe5e5 0%, #ffcccc 100%);
    }

    .popup-content.boost {
      background: linear-gradient(135deg, #e2f8f2 0%, #c8f2e2 100%);
    }

    #popup-text {
      font-size: 1.4rem;
      font-weight: bold;
      line-height: 1.3;
      color: #333;
      margin-bottom: 1rem;
    }

    #popup-text.headline-style {
      font-style: italic;
      font-weight: 600;
    }

    .popup-buttons {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-top: 1rem;
    }

    .popup-btn,
    .popup-btn:link,
    .popup-btn:visited {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 42px;              
      padding: 0 1.25rem;    
      font-size: 1rem;
      font-weight: bold;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: #333;
      color: #fff;
      text-decoration: none;
      box-sizing: border-box;
      transition: background 0.2s ease;
      margin: 0;
    }

    .popup-btn:hover {
      background: #444;
    }

    .popup-btn.close {
      background: #333;
      color: #fff;
    }

    .popup-btn.close:hover {
      background: #444;
    }

    .popup-btn.share {
      background: #333;
      color: #fff;
      text-decoration: none;
      display: flex;     
      align-items: center;       
      justify-content: center;
      line-height: 1;               
      padding: 0.6rem 1.25rem;     
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .popup-btn.share:hover {
      background: #444;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.05); }
    }

    /* --- Mobile layout adjustments --- */
@media (max-width: 600px) {
  body {
    justify-content: flex-start;
    padding-top: 0.5rem;
    padding-bottom: 5rem;
    overflow-x: hidden;
  }

  .party-banner {
    white-space: nowrap;
  }

  h1 {
    margin-top: 0.5rem; 
    margin-bottom: 0.5rem;
    font-size: 2rem;      
  }

  .headline {
    font-size: 1.1rem;
    margin-bottom: 1rem;
  }

  .swingometer {
    width: 90vw;
    height: 32vw;
    min-height: 180px;
    margin-top: 2rem;
  }

  .arrow {
    height: 105%;
  }

  .labels {
    width: 95vw;
    font-size: 1.1rem;
    margin-top: 0.5rem;
  }

  .bloost {
    font-size: 1.1rem;
    top: -2rem;
  }

  .disclaimer {
    position: relative;  
    bottom: auto;
    right: auto;
    margin-top: 1rem;
    padding-bottom: 1rem;
    text-align: center;   
    font-size: 0.75rem;
    opacity: 0.8;
  }

  .share-section {
    margin-top: 0.5rem;
    margin-bottom: 1rem;
  }

  .share-buttons {
    flex-direction: row;
    gap: 0.5rem;
    flex-wrap: wrap;
  }


    .past-link {
      position: static;         
      display: block;
      margin: 0.5rem auto 0.5rem auto;
      text-align: center;
      font-size: 0.9rem;
      padding: 0.5rem 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      width: fit-content;
      background: rgba(255, 255, 255, 0.8);
      opacity: 0.85;
    }

    .past-link:hover {
      opacity: 1;
      background: rgba(240, 240, 240, 0.9);
    }

  /* --- Mobile adjustments for vote section --- */
  .vote-section {
    margin-top: 0.5rem;
    margin-bottom: 1rem;
    padding: 0 1rem;
  }

  .vote-prompt {
    font-size: 1rem;
    line-height: 1.4;
    margin-bottom: 1.5rem;
  }

  .vote-buttons {
    flex-direction: column;
    gap: 0.75rem;
  }

  .vote-btn {
    width: 80%;
    max-width: 280px;
    margin: 0 auto;
    font-size: 0.95rem;
    padding: 0.75rem 1.25rem;
  }

   .follow-section {
    margin-bottom: 1rem;
  }
}
  </style>
</head>
<body>
  <!--<div class="party-banner">BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY </div>
  <div class="party-banner two">BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY </div>
  <div class="party-banner three">BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY </div>
  <div class="party-banner four">BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY </div>
  <div class="party-banner five">BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY BUDGET DAY </div>
-->
  
  <h1>REEVES-O-METER</h1>

  <div class="headline">
    <!-- update this headline and the-word before each deployment-->
    <span id="headline-text">
       01/12/2025 THE INDEPENDENT: 
       <span class="the-word">BLOW</span> FOR REEVES AS BUSINESS CONFIDENCE AT NEAR RECORD LOW AFTER BUDGET
    </span>
    <span id="headline-indicator" class="blow">
      <!-- update estimate and class before each deployment-->
      REEVES-O-METER estimates â–¼ 12% blow
    </span>
  </div>

  <div class="swingometer">
    <div class="bloost">BLOOST!</div>
    <div class="dial">
      <img src="media/reeves.png" alt="Rachel Reeves" class="reeves">
    </div>
    <div class="arrow" id="arrow"></div>
  </div>

  <div class="labels">
    <span class="blow">Blow!</span>
    <span class="boost">Boost!</span>
  </div>

    <div class="share-section">
    <p>Share todayâ€™s reading:</p>
    <div class="share-buttons">
      <!-- update "BOOST" or "BLOW" in share url-->
      <a href="https://twitter.com/intent/tweet?text=Todayâ€™s%20Reeves-o-meter%20reading%20is%20a%20BLOW%20for%20Rachel%20Reeves!%20https%3A%2F%2Freevesometer.co.uk"
        target="_blank" rel="noopener" class="share-btn twitter"
        onclick="gtag('event', 'share_twitter', { 'event_category': 'engagement', 'event_label': 'Twitter Share Button' });">
        X / Twitter
      </a>

      <!-- need to add display: none to this button below when pushing the native share button live-->
      <button id="desktop-share-btn" class="share-btn copy-btn" onclick="copyUrl()">
        Copy URL
      </button>

      <!--<button id="native-share-btn" class="share-btn" style="display:none"
        onclick="shareHeadlineNative()">
        Share Anywhere
      </button>-->
    </div>
  </div>

  <div class="scorecard-header">Budget season scorecard</div>

  <div class="scorecard">
    <span class="boost-score">BOOSTS: 3</span>
    <span class="divider">|</span>
    <span class="blow-score">BLOWS: 10</span>
  </div>

  <div class="generate-section">
    <button class="generate-btn" onclick="trackGenerate(); generateHeadline()">Generate your own headline</button>
  </div>

  <div class="vote-section">
    <p class="vote-prompt">
      Is the budget a boost or blow for Reeves?
    </p>

    <div class="vote-buttons">
      <div>
        <button class="vote-btn blow-btn" onclick="vote('blow'); firebaseVote('blows')">ðŸ’¨ Blow</button>
        <!--<div class="vote-counter blow-count">0</div>-->
      </div>
      <div>
        <button class="vote-btn boost-btn" onclick="vote('boost'); firebaseVote('boosts')">ðŸš€ Boost</button>
        <!--<div class="vote-counter boost-count">0</div>-->
      </div>
    </div>
  </div>

  <div class="follow-section">
    <a 
      href="https://x.com/bloworboost" 
      target="_blank" 
      rel="noopener" 
      class="follow-link"
      onclick="gtag('event', 'follow_click', { event_category: 'engagement', event_label: 'Follow on X' })"
    >
      Follow @Reevesometer on X
    </a>
  </div>


  <!--<div class="share-section">
    <p>Share todayâ€™s reading:</p>
    <div class="share-buttons">
      <!-- update "BOOST" or "BLOW" in share url--> <!--
      <a href="https://twitter.com/intent/tweet?text=Todayâ€™s%20Reeves-o-meter%20reading%20is%20a%20BLOW%20for%20Rachel%20Reeves!%20https%3A%2F%2Freevesometer.co.uk"
        target="_blank" rel="noopener" class="share-btn twitter"
        onclick="gtag('event', 'share_twitter', { 'event_category': 'engagement', 'event_label': 'Twitter Share Button' });">
        X / Twitter
      </a>

      <button class="share-btn copy-btn" onclick="copyUrl()">
        Copy URL
      </button>
    </div>
  </div>
-->
  <a href="past/" class="past-link">Past Headlines</a>

  <div class="disclaimer">this is, of course, a parody (but the 
    <!-- update this url before each deployment-->
    <a href="https://www.independent.co.uk/news/uk/politics/reeves-budget-business-confidence-tax-b2875284.html" target="blank" rel="noopener">headline</a>
    is real)
  </div>

  <!-- headline generator popup-->
  <div id="generator-popup" class="generator-popup hidden">
    <div class="popup-content">
      <div id="popup-text">Generating...</div>
    </div>
  </div>

<script>

  // starting angle 
  // -90 = full blow, 0 = bloost, +90 = full boost
  const DEFAULT_ANGLE = -51;   // <-- change this before each deployment
  const DEPLOY_DATE = "021220251200"; // <-- change this before each deployment
  const STORAGE_KEY   = `reevesometerAngle_${DEPLOY_DATE}`;
  const MAX_ANGLE     = 10;   // user movement range
  const STEP          = 2;    // each click = 2Â°

  const arrow = document.getElementById("arrow");

  function setArrow(angle) {
    arrow.style.transform = `rotate(${angle}deg)`;
  }

  function getStoredAngle() {
    const saved = localStorage.getItem(STORAGE_KEY);
    return saved ? parseInt(saved, 10) : null;
  }

  function saveAngle(angle) {
    localStorage.setItem(STORAGE_KEY, angle);
  }

  function updateAngle(change) {
    // Start from stored angle or default
    let base = getStoredAngle();
    if (base === null) base = DEFAULT_ANGLE;

    let newAngle = Math.max(
      DEFAULT_ANGLE - MAX_ANGLE,
      Math.min(DEFAULT_ANGLE + MAX_ANGLE, base + change)
    );

    saveAngle(newAngle);
    setArrow(newAngle);
  }

  async function generateHeadline() {
  const popup = document.getElementById("generator-popup");
  const content = popup.querySelector(".popup-content");
  const popupText = document.getElementById("popup-text"); // define once here

  popup.classList.remove("hidden");
  content.classList.remove("blow", "boost");
  popupText.classList.remove("headline-style");
  popupText.textContent = "Generating...";

  const words = [
    "Generating...", 
    "Calculating the boost...", 
    "Weighting the blow...",
    "Smashing the gangs..."
  ];

  let i = 0;

  // cycle phrases
  const interval = setInterval(() => {
    popupText.textContent = words[i % words.length];
    i++;
  }, 300);

  try {
    // fetch json
    const response = await fetch("headlines.json");
    const data = await response.json();

    // after x seconds, show final message
    setTimeout(() => {
      clearInterval(interval);

      // pick random headline
      const randomHeadline = data.headlines[Math.floor(Math.random() * data.headlines.length)];
      const { type, text: headlineText } = randomHeadline;

      content.classList.add(type);
      popupText.classList.add("headline-style");
      popupText.textContent = `"${headlineText}"`;


      const shareURL = `https://twitter.com/intent/tweet?text=${encodeURIComponent(
        `${headlineText} https://reevesometer.co.uk`
      )}`;

      // add buttons
      const buttonsHTML = `
        <div class="popup-buttons">
          <button class="popup-btn close" onclick="closePopup()">Close</button>
          <a href="${shareURL}" target="_blank" rel="noopener" class="popup-btn share">Tweet your headline</a>
        </div>
      `;
      popupText.insertAdjacentHTML("afterend", buttonsHTML);
    }, 2000);
  } catch (err) {
    console.error("Error fetching headlines:", err);
    clearInterval(interval);
    popupText.textContent = "Failed to load headline. Too busy running the numbers.";
  }
}


  function closePopup() {
    const popup = document.getElementById("generator-popup");
    popup.classList.add("hidden");
    
    // clean up previous content
    const content = popup.querySelector(".popup-content");
    const text = document.getElementById("popup-text");
    content.classList.remove("blow", "boost");
    text.nextElementSibling?.remove(); // remove buttons if present
  }

  function vote(side) {
    if (side === "boost") updateAngle(STEP);
    if (side === "blow")  updateAngle(-STEP);
  

    if (typeof gtag === "function") {
      gtag('event', 'vote_click', {
        event_category: 'Engagement',
        event_label: side
      });
    }
  }

  function copyUrl() {
  const url = window.location.href.split('?')[0]; // Gets the base URL
  navigator.clipboard.writeText(url).then(() => {
    const copyBtn = document.querySelector('.copy-btn');
    const originalText = copyBtn.textContent;
    
    // Provide quick visual feedback
    copyBtn.textContent = "Copied!";
    copyBtn.style.backgroundColor = "#2a9d8f"; // A temporary green background
    copyBtn.style.color = "#fff";
    
    // Revert button text and style after 1.5 seconds
    setTimeout(() => {
      copyBtn.textContent = originalText;
      copyBtn.style.backgroundColor = "rgba(255, 255, 255, 0.7)";
      copyBtn.style.color = "#333";
      copyBtn.style.border = "2px solid #ccc";
    }, 1500);

    if (typeof gtag === "function") {
      gtag('event', 'share_copy', {
        event_category: 'Engagement',
        event_label: 'Copy URL Button'
      });
    }

  }).catch(err => {
    console.error('Could not copy text: ', err);
    alert("Whoops.. could not copy URL. Please copy it manually, sorry!");
  });
}
  
  window.onload = () => {
    const saved = getStoredAngle();
    const startingAngle = saved !== null ? saved : DEFAULT_ANGLE;
    setArrow(startingAngle);
  };

  function trackGenerate() {
    if (typeof gtag === "function") {
      gtag('event', 'generate_click', {
        event_category: 'Engagement',
        event_label: 'Generate Headline Button'
      });
    }
  }
</script>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
  import { getDatabase, ref, runTransaction } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCsUqIWBIFRlgBZ2yLqH52yQCilV0bpCKU",
    authDomain: "reevesometer.firebaseapp.com",
    databaseURL: "https://reevesometer-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "reevesometer",
    storageBucket: "reevesometer.firebasestorage.app",
    messagingSenderId: "560034726940",
    appId: "1:560034726940:web:68632a372e4f225c3f4bd9",
    measurementId: "G-VJZWZG8EHV"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

  const db = getDatabase(app);

  function firebaseVote(type) {
    const voteRef = ref(db, `votes/${DEPLOY_DATE}/${type}`);
    runTransaction(voteRef, current => (current || 0) + 1)
      .then(snapshot => console.log(`${type} count updated:`, snapshot))
      .catch(err => console.error("Firebase vote failed:", err));
  }

  // Expose to global so inline HTML onclick can access it
  window.firebaseVote = firebaseVote;


  import { onValue } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

  const boostsRef = ref(db, `votes/${DEPLOY_DATE}/boosts`);
  const blowsRef  = ref(db, `votes/${DEPLOY_DATE}/blows`);

  onValue(boostsRef, snapshot => {
    document.querySelector('.boost-count').textContent = snapshot.val() || 0;
  });

  onValue(blowsRef, snapshot => {
    document.querySelector('.blow-count').textContent = snapshot.val() || 0;
  });


// Check if device is mobile
function isMobileDevice() {
  return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
}

// Check if native share can be used
function canUseNativeShare() {
  if (!navigator.share) return false;

  // For browsers with navigator.canShare, validate with a dummy payload
  if (navigator.canShare) {
    return navigator.canShare({ text: "test" });
  }

  // Otherwise, only allow iOS Safari and Chrome Android
  const ua = navigator.userAgent;
  const isSafari = /iPhone|iPad|iPod/.test(ua);
  const isChromeAndroid = /Android.*Chrome/.test(ua);
  return isSafari || isChromeAndroid;
}
/*
// Setup share buttons
function setupShareButtons() {
  const nativeBtn = document.getElementById("native-share-btn");
  const desktopBtn = document.getElementById("desktop-share-btn");

  if (!nativeBtn || !desktopBtn) return;

  // Hide both initially
  nativeBtn.style.display = "none";
  desktopBtn.style.display = "none";

  if (isMobileDevice() && canUseNativeShare()) {
    nativeBtn.style.display = "inline-flex"; // show mobile native share
  } else {
    desktopBtn.style.display = "inline-flex"; // show copy URL for desktop or unsupported mobile
  }
}

// Call after full DOM load
window.addEventListener("load", setupShareButtons);

// Native share handler
function shareHeadlineNative() {
  const headline = document.getElementById('headline-text').innerText;
  const url = window.location.href.split('?')[0];

  navigator.share({
    title: 'Reeves-o-Meter',
    text: headline,
    url: url
  }).catch((err) => console.error('Share failed:', err));
}

// Copy URL function for desktop
function copyUrl() {
  const url = window.location.href.split('?')[0];
  navigator.clipboard.writeText(url).then(() => {
    const copyBtn = document.getElementById('desktop-share-btn');
    const originalText = copyBtn.textContent;
    copyBtn.textContent = "Copied!";
    copyBtn.style.backgroundColor = "#2a9d8f";
    copyBtn.style.color = "#fff";
    setTimeout(() => {
      copyBtn.textContent = originalText;
      copyBtn.style.backgroundColor = "rgba(255, 255, 255, 0.7)";
      copyBtn.style.color = "#333";
    }, 1500);
  });
}*/



</script>



  
</body>
</html>
